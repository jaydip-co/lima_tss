<?xml version="1.0" encoding="UTF-8"?>
<!--

-->

<ui:composition
    template="/WEB-INF/templates/templet.xhtml"
    xmlns:b="http://bootsfaces.net/ui"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:define name="metadata">
        <f:metadata>
            <f:viewParam id="uuid" name="uuid" value="${timeSheetEntryBean.uuid}"
                         required="true"
                         requiredMessage="uuid for contract is required"/>
            <f:viewParam  name="parentUuid" value="${timeSheetEntryBean.parentUuid}"
                          required="true"
                          requiredMessage="uuid for contract is required"/>
        </f:metadata>

    </ui:define>
    <ui:param name="pageHeadline" value="title"/>
    <ui:define name = "scripts">
    </ui:define>
    <ui:define name="content">
        
        <h:link outcome="TimeSheetList">
            <f:param name="uuid" value="${timeSheetEntryBean.parentUuid}"/>
            <b:button value="Go Back" icon="back"/>
        </h:link>
        <br/>
        <h:outputLabel class="fa-2x" value="Contract:- #{timeSheetEntryBean.contract.name}" />
        <br/>
        <h:outputLabel class="fa-1-5x" value="${timeSheetEntryBean.timeSheet.startDate} - ${timeSheetEntryBean.timeSheet.endDate}"/>
        <br/>
        <h:outputText value="Total:- ${timeSheetEntryBean.timeSheet.hoursDue} hours" />
        <br/>
        <h:outputText value="Remaining:- ${timeSheetEntryBean.timeSheet.hoursDue - timeSheetEntryBean.timeSheet.workHours} hours" />
        <br/>
        <h:outputText value="Status: - #{timeSheetEntryBean.timeSheet.status}"/>
        <br/>
        <br/>
        <b:container style="text-align: center" class="col-12" rendered="#{timeSheetEntryBean.allTimeShhetEntry.size() == 0}">

            <p>
                Don'y have data to display
            </p> 
        </b:container>
        <ui:fragment rendered="#{timeSheetEntryBean.allTimeShhetEntry.size() > 0}">
            <ui:include src="current_time_sheet_list.xhtml" />
        </ui:fragment>
        <ui:fragment rendered="${timeSheetEntryBean.startStatus &amp;&amp; timeSheetEntryBean.employee}">
            <b:form>

                <b:commandButton  value="Sign Sheet"
                                  rendered="${timeSheetEntryBean.timeSheet.inProgress}" 
                                  actionListener="#{timeSheetEntryBean.signSheet}"/>
                <b:commandButton  value="Revoke Signature"
                                  rendered="${timeSheetEntryBean.timeSheet.signedByEmployee}" 
                                  actionListener="#{timeSheetEntryBean.revokeSignature}"/>
            </b:form>
        </ui:fragment>
        <ui:fragment rendered="${timeSheetEntryBean.supervisor}">
            <b:form>

                <b:commandButton  value="Sign Sheet"
                                  rendered="${timeSheetEntryBean.currentSheetinSignedByEmployee}" 
                                  actionListener="#{timeSheetEntryBean.signSheet()}"/>
            </b:form>
        </ui:fragment>
        <ui:fragment rendered="${timeSheetEntryBean.manager}">
            <b:form>

                <b:commandButton  value="Archieve Sheet"
                                  rendered="${timeSheetEntryBean.currentSheetinSignedBySupervisor}" 
                                  actionListener="#{timeSheetEntryBean.archieveSheet}"/>
            </b:form>
        </ui:fragment>


    </ui:define>
</ui:composition>
